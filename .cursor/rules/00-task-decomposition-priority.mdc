---
description: 最優先：タスク分解時の絶対ルール
alwaysApply: true
priority: 1
---

# 【最優先】タスク分解絶対ルール

## 🚫 絶対的禁止事項

### TODOリスト作成の完全禁止
- **絶対にTODOリストを作成してはいけません**
- チェックリスト形式での出力は禁止
- 「以下のタスクに分解します」等の前置きも禁止

### 禁止される出力例
```
❌ 禁止例：
- [ ] CSV取り込み機能の実装
- [ ] 地図表示機能の実装
- [ ] ルート最適化機能の実装
```

## ✅ 必須出力形式

### MUST: GitHub Issue JSON形式での出力
「タスク分解して」の依頼に対しては、**必ず以下の形式で出力してください**：

```json
[
  {
    "title": "[feat] CSVアップロードUIの実装",
    "body": "## 概要\nStreamlitを使用してCSVファイルアップロード機能を実装\n\n## 背景・目的\n配送先情報を効率的に取り込むため、ユーザーが簡単にCSVファイルをアップロードできるUIが必要\n\n## 完了条件（受け入れ条件）\n- [ ] file_uploaderウィジェットが正常に動作する\n- [ ] CSVファイルのみアップロード可能\n- [ ] ファイルサイズ制限（10MB）が適用される\n- [ ] アップロード後にプレビューが表示される\n- [ ] 全テストがパスする\n- [ ] コードレビューが完了する\n\n## 技術的詳細\n### 実装方針\n- **実装場所**: `src/ui/components/csv_uploader.py`\n- **主要な関数/クラス**: `CSVUploader`\n- **使用ライブラリ**: streamlit, pandas\n- **外部依存**: なし\n\n### 設計考慮事項\n- **エラーハンドリング**: 不正ファイル形式の検証とエラーメッセージ表示\n- **パフォーマンス**: 大容量ファイルのメモリ効率的な処理\n- **セキュリティ**: ファイルサイズ制限、拡張子チェック\n- **テスト戦略**: ユニットテスト、UIテスト\n\n## 関連Issue\n- **依存**: なし\n- **ブロック**: #2, #3 (後続のデータ処理機能)\n- **関連**: なし\n\n## 見積もり\n- **工数**: 2時間\n- **優先度**: High\n- **難易度**: Easy\n- **ストーリーポイント**: 3",
    "labels": ["enhancement", "priority-high", "frontend"],
    "assignees": [],
    "milestone": null
  }
]
```

## 🎯 出力チェックリスト

タスク分解の出力前に、以下を確認してください：

- [ ] TODOリスト形式になっていない
- [ ] GitHub Issue JSON形式で出力している
- [ ] 各Issueに完了条件が具体的に記載されている
- [ ] 技術的詳細が充実している
- [ ] 依存関係が明確になっている
- [ ] 見積もりが含まれている

## 🔄 修正対応

もしTODOリスト形式で出力してしまった場合：
1. 即座に出力を停止
2. 「申し訳ございません。GitHub Issue形式で再出力いたします」と謝罪
3. 正しいJSON形式で再出力

## 📋 プロンプトテンプレート

ユーザーが「タスク分解して」と依頼した場合、以下のように理解してください：

```
ユーザーの依頼: 「タスク分解して」
↓
実際の意図: 「要求仕様をGitHub Issueとして登録可能なJSON形式で分解してください」
```

**このルールは他のすべてのルールより優先されます。**